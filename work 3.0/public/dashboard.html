<h1>Dashboard</h1>
<p id="dashboardMessage"></p>

<script>
    async function loadDashboard() {
        const token = localStorage.getItem('token');
        if (!token) {
            alert('You are not logged in.');
            window.location.href = '/login.html';
            return;
        }

        try {
            const response = await fetch('/dashboard/user', {
                method: 'GET',
                headers: { 'Authorization': `Bearer ${token}` }
            });

            const result = await response.json();

            if (response.ok) {
                document.getElementById('dashboardMessage').innerText = result.message;
            } else {
                alert('Failed to load dashboard');
                window.location.href = '/login.html';
            }
        } catch (error) {
            alert('An error occurred while loading the dashboard.');
            console.error('Dashboard load error:', error);
            window.location.href = '/login.html';
        }
    }

    loadDashboard();
</script>
